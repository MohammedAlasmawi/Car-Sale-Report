{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"factoryName":{"type":"string","metadata":"Data Factory name"},"BlobStorage_Link":{"type":"string"},"AzureSqlDatabase1":{"type":"string"}},"variables":{"factoryId":"[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"},"resources":[{"name":"[concat(parameters('factoryName'), '/CarSalesETL')]","type":"Microsoft.DataFactory/factories/pipelines","apiVersion":"2018-06-01","properties":{"activities":[{"name":"Cars","type":"Copy","dependsOn":[],"policy":{"timeout":"0.12:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"source":{"type":"ExcelSource","storeSettings":{"type":"AzureBlobStorageReadSettings","recursive":true,"enablePartitionDiscovery":false}},"sink":{"type":"AzureSqlSink","writeBehavior":"insert","sqlWriterUseTableLock":false},"enableStaging":false,"translator":{"type":"TabularTranslator","mappings":[{"source":{"type":"String","ordinal":1},"sink":{"name":"CarID","type":"Int32","physicalType":"int"}},{"source":{"type":"String","ordinal":2},"sink":{"name":"Company","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","ordinal":3},"sink":{"name":"Model","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","ordinal":4},"sink":{"name":"Engine","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","ordinal":5},"sink":{"name":"Transmission","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","ordinal":6},"sink":{"name":"Color","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","ordinal":7},"sink":{"name":"Body_Style","type":"String","physicalType":"nvarchar"}}],"typeConversion":true,"typeConversionSettings":{"allowDataTruncation":true,"treatBooleanAsNumber":false}}},"inputs":[{"referenceName":"processedData","type":"DatasetReference","parameters":{}}],"outputs":[{"referenceName":"AzureSqlTable1","type":"DatasetReference","parameters":{}}]},{"name":"Customers","type":"Copy","dependsOn":[],"policy":{"timeout":"0.12:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"source":{"type":"ExcelSource","storeSettings":{"type":"AzureBlobStorageReadSettings","recursive":true,"enablePartitionDiscovery":false}},"sink":{"type":"AzureSqlSink","writeBehavior":"insert","sqlWriterUseTableLock":false},"enableStaging":false,"translator":{"type":"TabularTranslator","mappings":[{"source":{"type":"String","physicalType":"String","ordinal":1},"sink":{"name":"Name","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","physicalType":"String","ordinal":2},"sink":{"name":"Gender","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","physicalType":"String","ordinal":3},"sink":{"name":"AnnualIncome","type":"Decimal","physicalType":"decimal","scale":2,"precision":10}},{"source":{"type":"String","physicalType":"String","ordinal":4},"sink":{"name":"Phone","type":"String","physicalType":"nvarchar"}}],"typeConversion":true,"typeConversionSettings":{"allowDataTruncation":true,"treatBooleanAsNumber":false}}},"inputs":[{"referenceName":"Customer","type":"DatasetReference","parameters":{}}],"outputs":[{"referenceName":"AzureSqlTable2","type":"DatasetReference","parameters":{}}]},{"name":"Dealers","type":"Copy","dependsOn":[],"policy":{"timeout":"0.12:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"source":{"type":"ExcelSource","storeSettings":{"type":"AzureBlobStorageReadSettings","recursive":true,"enablePartitionDiscovery":false}},"sink":{"type":"AzureSqlSink","writeBehavior":"insert","sqlWriterUseTableLock":false},"enableStaging":false,"translator":{"type":"TabularTranslator","mappings":[{"source":{"type":"String","physicalType":"String","ordinal":1},"sink":{"name":"Dealer_No","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","physicalType":"String","ordinal":2},"sink":{"name":"Dealer_Name","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","physicalType":"String","ordinal":3},"sink":{"name":"Dealer_Reg","type":"String","physicalType":"nvarchar"}},{"source":{"type":"String","physicalType":"String","ordinal":4},"sink":{"name":"DealerID","type":"Int32","physicalType":"int"}}],"typeConversion":true,"typeConversionSettings":{"allowDataTruncation":true,"treatBooleanAsNumber":false}}},"inputs":[{"referenceName":"Dealer","type":"DatasetReference","parameters":{}}],"outputs":[{"referenceName":"AzureSqlTable3","type":"DatasetReference","parameters":{}}]},{"name":"Sales","type":"Copy","dependsOn":[],"policy":{"timeout":"0.12:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"source":{"type":"ExcelSource","storeSettings":{"type":"AzureBlobStorageReadSettings","recursive":true,"enablePartitionDiscovery":false}},"sink":{"type":"AzureSqlSink","writeBehavior":"insert","sqlWriterUseTableLock":false},"enableStaging":false,"translator":{"type":"TabularTranslator","mappings":[{"source":{"type":"String","physicalType":"String","ordinal":1},"sink":{"name":"CarID","type":"Int32","physicalType":"int"}},{"source":{"type":"String","physicalType":"String","ordinal":5},"sink":{"name":"DealerID","type":"Int32","physicalType":"int"}},{"source":{"type":"String","physicalType":"String","ordinal":6},"sink":{"name":"CustomerID","type":"Int32","physicalType":"int"}},{"source":{"type":"String","physicalType":"String","ordinal":2},"sink":{"name":"SaleDate","type":"DateTime","physicalType":"date"}},{"source":{"type":"String","physicalType":"String","ordinal":3},"sink":{"name":"Price","type":"Decimal","physicalType":"decimal","scale":2,"precision":10}}],"typeConversion":true,"typeConversionSettings":{"allowDataTruncation":true,"treatBooleanAsNumber":false}}},"inputs":[{"referenceName":"Sales","type":"DatasetReference","parameters":{}}],"outputs":[{"referenceName":"AzureSqlTable4","type":"DatasetReference","parameters":{}}]}],"policy":{"elapsedTimeMetric":{}},"annotations":[]},"dependsOn":["[concat(variables('factoryId'), '/datasets/processedData')]","[concat(variables('factoryId'), '/datasets/AzureSqlTable1')]","[concat(variables('factoryId'), '/datasets/Customer')]","[concat(variables('factoryId'), '/datasets/AzureSqlTable2')]","[concat(variables('factoryId'), '/datasets/Dealer')]","[concat(variables('factoryId'), '/datasets/AzureSqlTable3')]","[concat(variables('factoryId'), '/datasets/Sales')]","[concat(variables('factoryId'), '/datasets/AzureSqlTable4')]"]},{"name":"[concat(parameters('factoryName'), '/processedData')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('BlobStorage_Link')]","type":"LinkedServiceReference"},"annotations":[],"type":"Excel","typeProperties":{"sheetName":"Cars","location":{"type":"AzureBlobStorageLocation","fileName":"processed_car_sales.xlsx","container":"processed-data"}},"schema":[{"type":"String"},{"type":"String"},{"type":"String"},{"type":"String"},{"type":"String"},{"type":"String"},{"type":"String"}]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/AzureSqlTable1')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureSqlDatabase1')]","type":"LinkedServiceReference"},"annotations":[],"type":"AzureSqlTable","schema":[{"name":"CarID","type":"int","precision":10},{"name":"Company","type":"nvarchar"},{"name":"Model","type":"nvarchar"},{"name":"Engine","type":"nvarchar"},{"name":"Transmission","type":"nvarchar"},{"name":"Color","type":"nvarchar"},{"name":"BodyStyle","type":"nvarchar"}],"typeProperties":{"schema":"dbo","table":"Cars"}},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/Customer')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('BlobStorage_Link')]","type":"LinkedServiceReference"},"annotations":[],"type":"Excel","typeProperties":{"sheetName":"Customers","location":{"type":"AzureBlobStorageLocation","fileName":"processed_car_sales.xlsx","container":"processed-data"}},"schema":[{"type":"String"},{"type":"String"},{"type":"String"},{"type":"String"}]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/AzureSqlTable2')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureSqlDatabase1')]","type":"LinkedServiceReference"},"annotations":[],"type":"AzureSqlTable","schema":[{"name":"CustomerID","type":"int","precision":10},{"name":"CustomerName","type":"nvarchar"},{"name":"Gender","type":"nvarchar"},{"name":"AnnualIncome","type":"decimal","precision":18,"scale":2},{"name":"Phone","type":"nvarchar"}],"typeProperties":{"schema":"dbo","table":"Customers"}},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/Dealer')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('BlobStorage_Link')]","type":"LinkedServiceReference"},"annotations":[],"type":"Excel","typeProperties":{"sheetName":"Dealers","location":{"type":"AzureBlobStorageLocation","fileName":"processed_car_sales.xlsx","container":"processed-data"}},"schema":[{"type":"String"},{"type":"String"},{"type":"String"}]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/AzureSqlTable3')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureSqlDatabase1')]","type":"LinkedServiceReference"},"annotations":[],"type":"AzureSqlTable","schema":[{"name":"DealerID","type":"int","precision":10},{"name":"DealerName","type":"nvarchar"},{"name":"DealerRegion","type":"nvarchar"}],"typeProperties":{"schema":"dbo","table":"Dealers"}},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/Sales')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('BlobStorage_Link')]","type":"LinkedServiceReference"},"annotations":[],"type":"Excel","typeProperties":{"sheetName":"Sales","location":{"type":"AzureBlobStorageLocation","fileName":"processed_car_sales.xlsx","container":"processed-data"}},"schema":[{"type":"String"},{"type":"String"},{"type":"String"},{"type":"String"}]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/AzureSqlTable4')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureSqlDatabase1')]","type":"LinkedServiceReference"},"annotations":[],"type":"AzureSqlTable","schema":[{"name":"SaleID","type":"int","precision":10},{"name":"CarID","type":"int","precision":10},{"name":"SaleDate","type":"datetime","precision":23,"scale":3},{"name":"Price","type":"decimal","precision":18,"scale":2},{"name":"DealerID","type":"int","precision":10}],"typeProperties":{"schema":"dbo","table":"Sales"}},"dependsOn":[]}]}